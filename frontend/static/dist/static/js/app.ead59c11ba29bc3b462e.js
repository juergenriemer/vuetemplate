webpackJsonp([1],{"/PFk":function(t,e){},"/jJ7":function(t,e){},"/k7H":function(t,e){},"1LJm":function(t,e){},"2yOp":function(t,e){},"5t+x":function(t,e){},"7Kso":function(t,e){},CAgZ:function(t,e){},FQjh:function(t,e){},Ipsu:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"wrapper"}},[e("div",{attrs:{id:"app"}},[e("w-app",[e("router-view")],1)],1)])},staticRenderFns:[]};var r=s("VU/8")({name:"App"},n,!1,function(t){s("iDPJ"),s("aXBs"),s("m+18"),s("Ipsu"),s("7Kso"),s("lmG3"),s("FQjh")},null,null).exports,a=s("/ocq"),o=s("Xxa5"),u=s.n(o),c=s("exGp"),l=s.n(c),d=s("Dd8w"),f=s.n(d),m=s("NYxO"),v={name:"ListAdd",data:function(){return{list:{title:""}}},computed:{listId:function(){return this.$route.params.id}},methods:f()({},Object(m.b)(["addList"]),{add:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.list.title){e.next=2;break}return e.abrupt("return");case 2:t.addList({list:t.list}).then(function(){return t.list.title=""}).catch(function(e){return t.showError(e)});case 3:case"end":return e.stop()}},e,t)}))()}})},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{id:"list-add"},on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.list.title,expression:"list.title"}],attrs:{type:"text",name:"title",placeholder:"NEW LIST"},domProps:{value:t.list.title},on:{blur:t.add,input:function(e){e.target.composing||t.$set(t.list,"title",e.target.value)}}})])},staticRenderFns:[]};var p=s("VU/8")(v,h,!1,function(t){s("dniW")},null,null).exports,w=s("//Fk"),g=s.n(w),_=s("fZjL"),b=s.n(_),I=s("mvHQ"),k=s.n(I),x={before:"",middle:"",after:"",state:null,stateString:null,filter:null,filterString:null,getHashFilter:function(t){var e=window.location.hash;this.parts=e.match(/^(.*##\$=)(.*)(##.*)$/);this.before=e+"##$=",this.after="##",this.parts&&this.parts[2]&&(this.before=this.parts[1],this.after=this.parts[3],this.stateString=decodeURI(this.parts[2]),this.state=function(t){try{return JSON.parse(t)}catch(t){return!1}}(this.stateString),this.filter=this.state?this.state[t.filterName]:null,this.filterString=this.filter?k()(this.filter):null)},analyse:function(t){this.getHashFilter(t),t.filter&&(this.filterString||this.update(t)),this.filter&&(t.filter&&k()(t.filter)==this.filterString||(t.filter=this.filter,t.onFilterChange()))},update:function(t){var e=this.state||{};e[t.filterName]=t.filter;var s=k()(e),i=""+this.before+s+this.after;window.location.hash=i},request:function(t,e){var s={};for(var i in t){var n=e.filter.query[i],r=t[i].type;if(n)switch(r){case"String":s[i]="/"+n+"/";break;default:s[i]=n}}return[s,e.filter.sort||{},e.filter.slice||{},e.filter.fields||[]]},hashObservers:{},register:function(t){this.hashObservers[t._uid]=function(){return x.analyse(t)},x.analyse(t)},unregister:function(t){delete this.hashObservers[t._uid]}};window.onhashchange=function(){for(var t in console.warn("callacks: "+b()(x.hashObservers).length),x.hashObservers)x.hashObservers[t]()};var C={name:"ListGrid",data:function(){return{filterName:"listing",filter:{query:{}},items:[],idEdit:null}},created:function(){this.fetch()},computed:f()({},Object(m.c)(["lists","user"]),{listId:function(){return this.$route.params.id},lastSeen:function(){var t=localStorage.getItem("userid"),e=this.lists.reduce(function(e,s){var i=s.users.find(function(e){return e.userId==t});return e[s._id]=i.lastSeen,e},{});return e},missedUpdates:function(){var t=localStorage.getItem("userid");return this.lists.reduce(function(e,s){var i=s.users.find(function(e){return e.userId==t}).lastSeen,n=s.items.filter(function(t){return t.updatedAt>i}).length;return e[s._id]=n<100?n:99,e},{})}}),watch:{listId:function(){this.sawList(this.listId)}},updated:function(){this.$el.scrollTop=0},methods:f()({},Object(m.b)(["sawList","fetchLists","filterLists","deleteList","updateList"]),{to:function(t){self.location.href="/#/main/"+t},fetch:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchLists().then(function(){return t.listId?t.sawList(t.listId):g.a.resolve(!0)}).catch(function(e){return t.showError("xxxx"+e)});case 1:case"end":return e.stop()}},e,t)}))()},remove:function(t){var e=this;return l()(u.a.mark(function s(){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.deleteList(t);case 2:s.sent;case 3:case"end":return s.stop()}},s,e)}))()},edit:function(t){var e=this;return l()(u.a.mark(function s(){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.updateList(t);case 2:s.sent&&(e.idEdit=null);case 4:case"end":return s.stop()}},s,e)}))()}})},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"list-grid"}},[s("form",{on:{submit:function(t){t.preventDefault()}}},[t.lists&&t.lists.length>0?s("div",t._l(t.lists,function(e){return s("div",{key:e._id,staticClass:"row",class:e._id==t.listId?"current":"",attrs:{id:e._id},on:{click:function(s){return t.to(e._id)}}},[s("div",{staticClass:"avatar"},[s("svg",{attrs:{width:"100%",height:"100%","data-jdenticon-value":e.title}})]),t._v(" "),s("div",{staticClass:"title"},[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),t.missedUpdates[e._id]?s("div",{staticClass:"badge"},[t._v("\n          "+t._s(t.missedUpdates[e._id])+"\n        ")]):t._e()])}),0):s("div",[t._v("You don't have "),s("br"),t._v("any list yet")])])])},staticRenderFns:[]};var L=s("VU/8")(C,y,!1,function(t){s("atKR")},null,null).exports,E={data:function(){return{status:"idle",valid:{firstName:function(t){return t.length>1||"At least two characters"},lastName:function(t){return t.length>1||"At least two characters"},email:function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"Enter a valid e-mail"},password:function(t){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,32})/.test(t)||"use 8 to 32 characters, at least one number, upper, lowercase and special character"}}}},computed:{sending:function(){return"sending"==this.status},active:function(){return"sending"==this.status||"idle"==this.status}},methods:{validate:function(t){t.errorsCount||this.submit()}}},$={mixins:[E],name:"ListDelete",data:function(){return{email:"",showDialog:!1}},computed:f()({},Object(m.c)(["lists"]),{listId:function(){return this.$route.params.id},list:function(){var t=this,e=this.lists.find(function(e){return e._id==t.listId});return e||{}}}),created:function(){var t=this;de.$on("deleteList",function(e){t.showDialog=!0})},methods:f()({},Object(m.b)(["deleteList"]),{showNextList:function(t){var e="";if(this.lists.length>1){var s=this.lists.findIndex(function(e){return e._id==t}),i=s>0?s-1:1;e=this.lists[i]._id}this.showDialog=!1,this.$root.$router.push({path:"/main/"+e})},submit:function(){var t=this;return l()(u.a.mark(function e(){var s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t.listId,t.showNextList(s),t.deleteList(s).catch(function(e){return t.showError(e)});case 3:case"end":return e.stop()}},e,t)}))()}})},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("w-dialog",{staticClass:"dialog",attrs:{shadow:"shadow",transition:"bounce",title:"Confirm deletion",width:"400"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[t.active?s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("div",{staticClass:"body"},[s("div",{staticClass:"title"},[t._v("Are you sure you want to delete this list?")]),s("div",{staticClass:"text"},[t._v("There is no way to recover a list once deleted.")]),s("div",{staticClass:"buttons"},[s("w-button",{staticClass:"ma1",attrs:{text:"text",shadow:"shadow",md:"md"},on:{click:function(e){t.showDialog=!1}}},[t._v("CANCEL")]),s("w-button",{staticClass:"ma1",attrs:{type:"submit",shadow:"shadow",md:"md","bg-color":"error"}},[t._v("DELETE")])],1)])]):t._e()],1)},staticRenderFns:[]};var A=s("VU/8")($,S,!1,function(t){s("eRWW")},"data-v-3cff4010",null).exports,R={mixins:[E],name:"ListShare",data:function(){return{email:"",role:"user",showDialog:!1}},computed:f()({},Object(m.c)(["lists"]),{listId:function(){return this.$route.params.id},list:function(){var t=this,e=this.lists.find(function(e){return e._id==t.listId});return e||{}}}),created:function(){var t=this;de.$on("shareList",function(e){t.showDialog=!0})},methods:f()({},Object(m.b)(["inviteList"]),{submit:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.inviteList({listId:t.listId,email:t.email,role:t.role}).then(function(){t.showDialog=!1}).catch(function(e){console.log(e),e.status,t.status="idle",t.showError(e)});case 1:case"end":return e.stop()}},e,t)}))()}})},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("w-dialog",{staticClass:"dialog",attrs:{shadow:"shadow",transition:"bounce",title:"Share list",width:"400"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[t.active?s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("div",{staticClass:"body"},[s("div",{staticClass:"title"},[t._v("Invite a friend to work together on this list!")]),s("div",{staticClass:"text"},[t._v("Your friend will be able to add, edit and delete items as well as mark them done.")]),s("w-input",{staticClass:"center",attrs:{id:"email",label:"E-MAIL OF FRIEND",inputmode:"email",name:"email",disabled:t.sending,validators:[t.valid.email],required:"required"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("div",{staticClass:"buttons"},[s("w-button",{staticClass:"ma1",attrs:{text:"text",shadow:"shadow",md:"md"},on:{click:function(e){t.showDialog=!1}}},[t._v("CANCEL")]),s("w-button",{staticClass:"ma1",attrs:{type:"submit",shadow:"shadow",md:"md","bg-color":"success"}},[t._v("INVITE")])],1)],1)]):t._e()],1)},staticRenderFns:[]};var O=s("VU/8")(R,T,!1,function(t){s("YJJv")},"data-v-1450041f",null).exports,N={name:"ItemAdd",data:function(){return{item:{title:"",done:!1}}},computed:{listId:function(){return this.$route.params.id}},methods:f()({},Object(m.b)(["addItem"]),{clear:function(){this.item.title=""},delayedAdd:function(){var t=this;setTimeout(function(){t.add()},250)},add:function(){var t=this;return l()(u.a.mark(function e(){var s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.item.title),t.item.title){e.next=3;break}return e.abrupt("return");case 3:s={listId:t.listId,item:t.item},t.addItem(s).then(function(){t.item.title="",t.$el.querySelector("input").focus()}).catch(function(e){t.showError(e)});case 5:case"end":return e.stop()}},e,t)}))()}})},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{id:"item-add"},on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"item.title"}],attrs:{type:"text",name:"title",placeholder:"A NEW ITEM"},domProps:{value:t.item.title},on:{blur:t.delayedAdd,input:function(e){e.target.composing||t.$set(t.item,"title",e.target.value)}}}),t._v(" "),s("i",{staticClass:"fas fa-times clear",on:{click:function(e){return t.clear()}}})])},staticRenderFns:[]};var V=s("VU/8")(N,j,!1,function(t){s("CAgZ")},null,null).exports,U={name:"ItemGrid",data:function(){return{itemCount:0,editListItems:!1,filter:{query:{}},idEdit:null,newTitle:null}},created:function(){var t=this;this.fetch(),this.seeList(),de.$on("editListItems",function(e){t.editListItems=e})},computed:f()({},Object(m.c)(["lists","user"]),{listId:function(){return this.$route.params.id},list:function(){var t=this,e=this.lists.find(function(e){return e._id==t.listId});return e||{}},items:function(){this.list.items;return this.list.items||[]},lastSeen:function(){var t=localStorage.getItem("userid"),e=this.lists.reduce(function(e,s){var i=s.users.find(function(e){return e.userId==t});return e[s._id]=i.lastSeen,e},{});return e}}),watch:{listId:function(){this.seeList()}},updated:function(){this.itemCount<this.items.length&&(this.itemCount=this.items.length,this.$el.scrollTop=this.$el.scrollHeight)},methods:f()({},Object(m.b)(["fetchLists","filterItems","deleteItem","updateItem"]),{seeList:function(){var t=localStorage.getItem("missed");if(t){var e=JSON.parse(t);e&&e[this.listId]&&(this.lastSeen=e[this.listId].lastSeen)}},closeInput:function(){this.newTitle=null,this.idEdit=null},editInput:function(t,e){switch(t.key){case"Escape":this.closeInput()}},editMode:function(t,e){var s=t.target.closest("form");this.idEdit=this.idEdit==e._id?null:e._id,this.newTitle=e.title,setTimeout(function(){var t=s.querySelector("input");t&&t.focus()},0)},fetch:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchLists();case 2:e.sent;case 3:case"end":return e.stop()}},e,t)}))()},remove:function(t){var e=this;return l()(u.a.mark(function s(){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.deleteItem({listId:e.listId,itemId:t});case 2:case"end":return s.stop()}},s,e)}))()},done:function(t){var e=this;return l()(u.a.mark(function s(){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.done=!t.done,s.next=3,e.updateItem({listId:e.listId,itemId:t._id,item:t});case 3:case"end":return s.stop()}},s,e)}))()},saveInput:function(t){var e=this;return l()(u.a.mark(function s(){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.newTitle&&(t.title=e.newTitle),s.next=3,e.updateItem({listId:e.listId,itemId:t._id,item:t});case 3:e.closeInput();case 4:case"end":return s.stop()}},s,e)}))()}})},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"item-grid"}},[t.items&&t.items.length>0?s("div",t._l(t.items,function(e){return s("form",{key:e._id,staticClass:"row",class:[e._id==t.idEdit?"focus":"",e.done?"done":"",e.updatedAt>t.lastSeen[t.listId]?"xxxyellow":""],attrs:{id:e._id},on:{submit:function(s){return s.preventDefault(),t.saveInput(e)},dblclick:function(s){return t.done(e)}}},[s("div",{staticClass:"avatar"},[s("i",{staticClass:"fas fa-check",on:{click:function(s){return t.done(e)}}})]),t._v(" "),t.idEdit==e._id?s("div",{staticClass:"title"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newTitle,expression:"newTitle"}],attrs:{spellcheck:"false",type:"text"},domProps:{value:t.newTitle},on:{blur:function(e){return t.closeInput()},keydown:function(e){"Escape"==e.key&&t.closeInput()},input:function(e){e.target.composing||(t.newTitle=e.target.value)}}})]):t._e(),t._v(" "),t.idEdit!=e._id?s("div",{staticClass:"title noselect",attrs:{title:e.title}},[t._v("\n        "+t._s(e.title)+"\n      ")]):t._e(),t._v(" "),s("div",{staticClass:"buttons"},[t.editListItems?t._e():s("div",{staticClass:"normal"},[s("i",{staticClass:"far fa-comment-dots"}),t._v(" "),s("i",{staticClass:"fas fa-comment-dots"}),t._v(" "),s("i",{staticClass:"fas fa-comment-medical"})]),t._v(" "),t.editListItems?s("div",{staticClass:"special"},[s("i",{staticClass:"fas fa-trash-alt",on:{click:function(s){return t.remove(e._id)}}}),t._v(" "),s("i",{staticClass:"fas fa-edit",on:{click:function(s){return t.editMode(s,e)}}})]):t._e()])])}),0):s("div",[t._v("You don't have any item yet")])])},staticRenderFns:[]};var F=s("VU/8")(U,P,!1,function(t){s("qWKt")},null,null).exports,D={name:"ItemListMenu",data:function(){return{infoShown:!1,showMenu:!1,editListItems:!1}},computed:f()({},Object(m.c)(["lists"]),{listId:function(){return this.$route.params.id},list:function(){var t=this,e=this.lists.find(function(e){return e._id==t.listId});return e||{}}}),created:function(){var t=this;de.$on("showInfo",function(e){t.infoShown="list-info"==e}),de.$on("closeInfo",function(e){t.infoShown=!1})},methods:f()({},Object(m.b)(["deleteList","resetList"]),{backToList:function(){self.location.href="/#/"},showInfo:function(){this.infoShown?de.$emit("closeInfo"):de.$emit("showInfo","list-info")},menu:function(t){switch(t.target.getAttribute("data-link")){case"editItems":this.editListItems=!this.editListItems,de.$emit("editListItems",this.editListItems);break;case"reset":this.resetList(this.listId);break;case"share":de.$emit("shareList");break;case"delete":de.$emit("deleteList");break;case"info":de.$emit("showInfo","list-info");break;case"manage":de.$emit("showInfo","manage-list")}this.showMenu=!1}})},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"item-list-menu"}},[s("div",{staticClass:"buttons"},[s("i",{staticClass:"fas fa-arrow-left",on:{click:function(e){return t.backToList()}}})]),t._v(" "),t.listId?s("div",{staticClass:"avatar",on:{click:t.showInfo}},[s("svg",{attrs:{width:"100%",height:"100%","data-jdenticon-value":t.list.title}})]):t._e(),t._v(" "),t.listId?s("div",{staticClass:"title",on:{click:t.showInfo}},[t._v(t._s(t.list.title))]):t._e(),t._v(" "),t.listId?s("div",{staticClass:"buttons menu"},[s("i",{staticClass:"fas fa-ellipsis-v",on:{click:function(e){t.showMenu=!t.showMenu}}}),t._v(" "),t.showMenu?s("div",{attrs:{id:"menu",xxxxstyle:"transform-origin: right top; transform: scale(1); opacity: 1"}},[s("ul",{on:{click:function(e){return t.menu(e)}}},[s("li",{attrs:{"data-link":"info"}},[t._v("List info")]),t._v(" "),t.listAdmin?s("li",{attrs:{"data-link":"manage"}},[t._v("Manage list")]):t._e(),t._v(" "),s("li",{class:t.editListItems?"bold":"",attrs:{"data-link":"editItems"}},[t._v("\n          Edit list items\n        ")]),t._v(" "),s("li",{attrs:{"data-link":"reset"}},[t._v("Uncheck all items")]),t._v(" "),t.listAdmin?s("li",{attrs:{"data-link":"share"}},[t._v("Share list")]):t._e(),t._v(" "),t.listAdmin?s("li",{attrs:{"data-link":"delete"}},[t._v("Delete list")]):t._e()])]):t._e()]):t._e()])},staticRenderFns:[]};var q=s("VU/8")(D,M,!1,function(t){s("pILz")},null,null).exports,W={name:"ManageList",mixins:[E],data:function(){return{processing:!1,description:"bla fah sel",roles:[{label:"User",value:"user"},{label:"Admin",value:"admin"},{label:"Owner",value:"owner"}]}},created:function(){},computed:f()({},Object(m.c)(["lists","user"]),{list:function(){var t=this,e=this.lists.find(function(e){return e._id==t.listId});return e||{}},listId:function(){return this.$route.params.id}}),methods:f()({},Object(m.b)(["updateList","toggleAdmin"]),{close:function(){de.$emit("manageList",!1)},toggleAdminNow:function(t,e){var s=this;return l()(u.a.mark(function i(){return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(console.log(s.listId,t,e),!s.processing){i.next=3;break}return i.abrupt("return");case 3:s.processing=!0,console.log("go"),s.toggleAdmin({listId:s.listId,userId:t,isAdmin:e}).then(function(){s.processing=!1}).catch(function(t){return s.showError(t)});case 6:case"end":return i.stop()}},i,s)}))()},add:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.updateList({list:list}).catch(function(e){return t.showError(e)});case 1:case"end":return e.stop()}},e,t)}))()}})},K={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form"},[s("h3",[t._v("Name & Description"),s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("w-input",{staticClass:"mb4",attrs:{id:"title",label:"TITLE",name:"title",disabled:t.sending,validators:[t.valid.firstName],required:"required"},model:{value:t.list.title,callback:function(e){t.$set(t.list,"title",e)},expression:"list.title"}}),s("w-textarea",{staticClass:"mb4",attrs:{id:"description",label:"Describe this list",name:"description",disabled:t.sending},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),s("h3",[t._v("Members"),s("div",{staticClass:"rows"},t._l(t.list.users,function(e){return s("div",{key:e._id,staticClass:"row"},[s("div",{staticClass:"avatar",style:{background:t.avatarColor(e.short)}},[t._v(t._s(e.short)),"owner"==e.role?s("i",{staticClass:"fas fa-crown admin owner"}):t._e(),"admin"==e.role?s("i",{staticClass:"fas fa-crown admin"}):t._e()]),s("div",{staticClass:"title"},[t._v(t._s(e.name))]),s("div",{staticClass:"admin-toggle"},[s("w-checkbox",{attrs:{value:"user"!=e.role,disabled:"owner"==e.role,label:"Adminx"},on:{input:function(s){return t.toggleAdminNow(e.userId,s)}}})],1)])}),0)]),s("h3",[t._v("Pending invitations"),s("div",{staticClass:"rows"},t._l(t.list.invitees,function(e){return s("div",{key:e._id,staticClass:"row"},[s("div",{staticClass:"w-flex"},[t._v(t._s(e.email))])])}),0)])])},staticRenderFns:[]};var J=s("VU/8")(W,K,!1,function(t){s("/jJ7")},null,null).exports,Y={name:"ApproveInvites",mixins:[E],props:["hide"],data:function(){return{approves:{},invites:[]}},created:function(){var t=this;this.getListInvites(),de.$on("showApproveInvites",function(e){t.hide=!e})},methods:f()({},Object(m.b)(["approveInvites","listInvites"]),{getListInvites:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.listInvites().then(function(e){t.status="OK",e.data&&e.data.lists&&(t.invites=e.data.lists,t.approves=t.invites.reduce(function(t,e){return t[e._id]=!0,t},{}))}).catch(function(e){switch(e.status){case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}});case 1:case"end":return e.stop()}},e,t)}))()},submit:function(){var t=this;return l()(u.a.mark(function e(){var s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.approveInvites({approves:t.approves,lists:t.invites.filter(function(e){return t.approves[e._id]})});case 2:s=e.sent,console.log(s),t.$router.push("/main");case 5:case"end":return e.stop()}},e,t)}))()}})},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form"},[s("w-form",[s("p",[t._v("You have been invited to join lists.")]),s("p",[t._v("Select the ones you want and join.")]),s("div",{staticClass:"rows"},[t._l(t.invites,function(e){return s("div",{key:e._id,staticClass:"row",on:{click:function(s){t.approves[e._id]=!t.approves[e._id]}}},[s("div",{staticClass:"w-flex"},[s("w-checkbox",{model:{value:t.approves[e._id],callback:function(s){t.$set(t.approves,e._id,s)},expression:"approves[invite._id]"}},[t._v(t._s(e.title))])],1)])}),s("div",{staticClass:"buttons"},[s("w-button",{staticClass:"ma1",attrs:{"bg-color":"primary",color:"white",md:"md",shadow:"shadow",disabled:t.sending,loading:t.sending},on:{click:t.submit}},[t._v("JOIN")])],1)],2)])],1)},staticRenderFns:[]};var H=s("VU/8")(Y,G,!1,function(t){s("5t+x")},null,null).exports,z={name:"UserInfo",data:function(){return{showMenu:!1,userid:"",firstName:"",lastName:"",email:"",short:""}},computed:Object(m.c)(["user"]),created:function(){this.init()},methods:f()({},Object(m.b)(["info","logout"]),{init:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.info().then(function(e){t.userid=localStorage.getItem("userid"),t.firstName=localStorage.getItem("firstName"),t.lastName=localStorage.getItem("lastName"),t.short=t.firstName.charAt(0)+t.lastName.charAt(0)});case 1:case"end":return e.stop()}},e,t)}))()},menu:function(t){switch(t.target.getAttribute("data-link")){case"invites":de.$emit("showInfo","approve-invites");break;case"logout":this.logout()}this.showMenu=!1}})},X={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"user-info"}},[s("div",{staticClass:"avatar",style:{background:t.avatarColor(t.short)}},[t._v("\n    "+t._s(t.short)+"\n  ")]),t._v(" "),s("div",{staticClass:"title"},[t._v(t._s(t.firstName)+" "+t._s(t.lastName))]),t._v(" "),s("div",{staticClass:"menu buttons"},[s("i",{staticClass:"fas fa-ellipsis-v",on:{click:function(e){t.showMenu=!t.showMenu}}}),t._v(" "),t.showMenu?s("div",{staticStyle:{"transform-origin":"right top",transform:"scale(1)",opacity:"1"},attrs:{id:"menu"}},[s("ul",{on:{click:function(e){return t.menu(e)}}},[s("li",{attrs:{"data-link":"invites"}},[t._v("My Invitations")]),t._v(" "),s("li",{attrs:{"data-link":"logout"}},[t._v("Logout")])])]):t._e()])])},staticRenderFns:[]};var Z,Q=s("VU/8")(z,X,!1,function(t){s("/PFk")},null,null).exports,B={name:"UserSocket",data:function(){return{}},sockets:{connect:function(){console.warn("CONNECTED")}},computed:Object(m.c)(["user","lists"]),created:function(){var t=this;this.waitFor().then(function(){var e=localStorage.getItem("userid"),s=sessionStorage.getItem("csrf");console.log("init join",s),t.$socket.emit("join",{userId:e,csrf:s}),t.sockets.subscribe(s,function(t){console.warn(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),console.warn(t.item.title+" > "+t.item.done),console.warn(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>")})})},methods:f()({},Object(m.b)(["addItemExtern","updateItemExtern","removeItemExtern"]),{waitFor:function(){return new g.a(function(t,e){!function e(){if(sessionStorage.getItem("csrf"))return t();console.log("...wait for csrf to arrive"),setTimeout(e,30)}()})},seenList:function(t,e){var s=localStorage.getItem("missed"),i=t.lists.find(function(t){return t._id==e});i&&((s=s?JSON.parse(s):{})[i._id]&&(s[i._id]={lastSeen:(new Date).toString(),number:0},Vue.set(i,"meta",{added:0,updated:0,removed:0})),localStorage.setItem("missed",k()(s)))},checkForUpdates:function(t){var e=localStorage.getItem("missed");e=e?JSON.parse(e):{},t.lists.forEach(function(t){e[t._id]||(e[t._id]={lastSeen:(new Date).toString()}),e[t._id].number=0,t.items.filter(function(s){new Date(s.updatedAt)>new Date(e[t._id].lastSeen)&&e[t._id].number++}),Vue.set(t,"meta",{added:0,updated:e[t._id].number,removed:0})}),localStorage.setItem("missed",k()(e))}})},tt={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},et=s("VU/8")(B,tt,!1,null,null,null).exports,st={name:"InfoHeader",props:["title"],methods:{close:function(){de.$emit("closeInfo")}}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"info-menu"}},[s("div",{staticClass:"buttons"},[s("i",{staticClass:"fas fa-times",on:{click:function(e){return t.close()}}})]),s("h3",{staticClass:"title"},[t._v(t._s(t.title))])])},staticRenderFns:[]},nt=s("VU/8")(st,it,!1,null,null,null).exports,rt=s("bOdI"),at=s.n(rt),ot=(Z={name:"ManageList",mixins:[E],data:function(){return{listId:null,description:"bla fah sel",roles:[{label:"User",value:"user"},{label:"Admin",value:"admin"},{label:"Owner",value:"owner"}]}},created:function(){},computed:f()({},Object(m.c)(["lists","user"]),{list:function(){var t=this,e=this.lists.find(function(e){return e._id==t.listId});return e||{}},owner:function(){return this.list.users.find(function(t){return"owner"==t.role}).name}}),methods:f()({},Object(m.b)(["updateList"]),{setListId:function(){this.listId=this.$route.params.id},close:function(){de.$emit("manageList",!1)},add:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.updateList({list:list}).catch(function(e){return t.showError(e)});case 1:case"end":return e.stop()}},e,t)}))()}})},at()(Z,"created",function(){this.setListId()}),at()(Z,"watch",{$route:function(t,e){this.setListId()}}),Z),ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form"},[s("h3",[t._v(t._s(t.list.title))]),t.list.description?s("p",[t._v(t._s(t.list.description))]):s("p",[s("em",[t._v("No description available")])]),s("p",[t._v("Created by "+t._s(t.owner)+" on "+t._s(t.list.createdAt))]),s("h3",[t._v("Current Members"),t._l(t.list.users,function(e){return s("div",{key:e._id,staticClass:"row"},[s("div",{staticClass:"avatar",style:{background:t.avatarColor(e.short)}},[t._v(t._s(e.short)),"owner"==e.role?s("i",{staticClass:"fas fa-crown admin owner"}):t._e(),"admin"==e.role?s("i",{staticClass:"fas fa-crown admin"}):t._e()]),s("div",[t._v(t._s(e.name)+" "+t._s(e.role))])])})],2),t.listAdmin?s("h3",[t._v("Pending invitations"),s("div",{staticClass:"rows"},t._l(t.list.invitees,function(e){return s("div",{key:e._id,staticClass:"row"},[s("div",{staticClass:"title"},[t._v(t._s(e.email))])])}),0)]):t._e()])},staticRenderFns:[]},ct={name:"DashboardIndex",components:{UserInfo:Q,UserSocket:et,ListAdd:p,ListGrid:L,ListDelete:A,ListShare:O,ItemGrid:F,ItemAdd:V,ItemListMenu:q,ManageList:J,ApproveInvites:H,InfoHeader:nt,ListInfo:s("VU/8")(ot,ut,!1,null,null,null).exports},data:function(){return{phoneWidth:400,windowWidth:window.innerWidth,infoTitle:"",infoComponent:"",showInfo:!1,infos:{"approve-invites":"Approve Invitations","list-info":"List information","manage-list":"Mange this list"}}},computed:{showLeft:function(){return this.windowWidth>this.phoneWidth||!this.$route.params.id&&!this.showInfo},showMiddle:function(){return this.windowWidth>this.phoneWidth||!(!this.$route.params.id||this.showInfo)}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.windowWidth=window.innerWidth})},created:function(){var t=this;de.$on("showInfo",function(e){t.infoTitle=t.infos[e],t.infoComponent=e,t.showInfo=!0}),de.$on("closeInfo",function(){return t.showInfo=!1})}},lt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{attrs:{id:"box"}},[t.showLeft?s("div",{staticClass:"left column"},[s("user-info",{staticClass:"header"}),t._v(" "),s("list-add",{staticClass:"add"}),t._v(" "),s("div",[t._v(t._s(t.windowWidth))]),t._v(" "),s("list-grid",{staticClass:"content"})],1):t._e(),t._v(" "),s("div",{staticClass:"right column",class:[t.showInfo?"":"hide"]},[s("info-header",{staticClass:"header",attrs:{title:t.infoTitle}}),t._v(" "),s(t.infoComponent,{tag:"component",staticClass:"content"})],1),t._v(" "),t.showMiddle?s("div",{staticClass:"middle column"},[s("item-list-menu",{staticClass:"header"}),t._v(" "),s("item-grid",{staticClass:"content"}),t._v(" "),s("item-add",{staticClass:"add"})],1):t._e()]),t._v(" "),s("div",[s("list-delete"),t._v(" "),s("list-share")],1),t._v(" "),s("user-socket")],1)},staticRenderFns:[]};var dt=s("VU/8")(ct,lt,!1,function(t){s("2yOp")},null,null).exports,ft={name:"Register",mixins:[E],data:function(){return{user:{firstName:"Juergen",lastName:"Riemer",email:"juergen.riemer@gmail.com",password:"Test!234"}}},methods:f()({},Object(m.b)(["registerUser"]),{submit:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.status="sending",setTimeout(function(){t.registerUser(t.user).then(function(){t.status="OK"}).catch(function(e){switch(e.status){case 400:t.status="idle";break;case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}})},500);case 2:case"end":return e.stop()}},e,t)}))()}})},mt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"single"}},[s("div",{staticClass:"single column"},[s("div",{staticClass:"form"},[s("h3",[t._v("Register an account")]),t.active?s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("w-input",{staticClass:"mb4",attrs:{id:"firstName",label:"FIRST NAME",name:"firstName",disabled:t.sending,validators:[t.valid.firstName],required:"required"},model:{value:t.user.firstName,callback:function(e){t.$set(t.user,"firstName",e)},expression:"user.firstName"}}),s("w-input",{staticClass:"mb4",attrs:{id:"lastName",label:"LAST NAME",name:"lastName",disabled:t.sending,validators:[t.valid.lastName],required:"required"},model:{value:t.user.lastName,callback:function(e){t.$set(t.user,"lastName",e)},expression:"user.lastName"}}),s("w-input",{staticClass:"mb4",attrs:{id:"email",label:"E-MAIL",inputmode:"email",name:"email",disabled:t.sending,validators:[t.valid.email],required:"required"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),s("w-input",{staticClass:"mb4",attrs:{id:"password",label:"PASSWORD",name:"password",disabled:t.sending,validators:[t.valid.password],required:"required"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),s("div",{staticClass:"buttons"},[s("w-button",{staticClass:"ma1",attrs:{"bg-color":"primary",color:"white",shadow:"shadow",md:"md",disabled:t.sending,loading:t.sending,type:"submit"}},[t._v("REGISTER")])],1)],1):t._e(),"is-registered"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(0)]):t._e(),"in-registration"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(1)]):t._e(),"OK"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"success bounce fas fa-check"}),t._m(2)]):t._e()],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account exists already.")]),e("p",[this._v("If you are having troubles logging please try to reset your password.")]),e("a",{attrs:{href:"#/reset-password"}},[this._v("Reset your password")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account exists already but was not yet verified.")]),e("p",[this._v("In case you did not receive an e-mail we can send it again.")]),e("a",{attrs:{href:"#/resend-verification"}},[this._v("Resend registration verification")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Your registration was successful.")]),e("p",[this._v("Please check your mailbox for a verification e-mail.")])])}]},vt=s("VU/8")(ft,mt,!1,null,null,null).exports,ht={name:"ResetPassword",mixins:[E],data:function(){return{user:{email:"juergen.riemer@gmail.com",password:"Test!234"}}},methods:f()({},Object(m.b)(["resetPassword"]),{submit:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.status="sending",setTimeout(function(){t.resetPassword(t.user).then(function(){t.status="OK"}).catch(function(e){switch(e.status){case 400:t.status="idle";break;case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}})},500);case 2:case"end":return e.stop()}},e,t)}))()}})},pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"single"}},[s("div",{staticClass:"single column"},[s("div",{staticClass:"form"},[s("h3",[t._v("Reset your password")]),t.active?s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("w-input",{staticClass:"mb4",attrs:{id:"email",label:"E-MAIL",name:"email",inputmode:"email",disabled:t.sending,validators:[t.valid.email],required:"required"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),s("w-input",{staticClass:"mb4",attrs:{id:"password",label:"PASSWORD",name:"password",disabled:t.sending,validators:[t.valid.password],required:"required"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),s("div",{staticClass:"buttons"},[s("w-button",{staticClass:"ma1",attrs:{"bg-color":"primary",color:"white",shadow:"shadow",md:"md",disabled:t.sending,loading:t.sending,type:"submit"}},[t._v("REGISTER")])],1)],1):t._e(),"no-user"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(0)]):t._e(),"in-registration"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(1)]):t._e(),"OK"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"success bounce fas fa-check"}),t._m(2)]):t._e()],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account does not exist.")]),e("p",[this._v("Check your e-mail or create a new account.")]),e("a",{attrs:{href:"#/register"}},[this._v("Register an account")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account exists already but was not yet verified.")]),e("p",[this._v("In case you did not receive an e-mail we can send it again.")]),e("a",{attrs:{href:"#/resend-verification"}},[this._v("Resend registration verification")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Your request to change the password was successful.")]),e("p",[this._v("Please check your mailbox for a verification e-mail.")])])}]},wt=s("VU/8")(ht,pt,!1,null,null,null).exports,gt={name:"PasswordResetVerify",mixins:[E],created:function(){this.submit()},methods:f()({},Object(m.b)(["resetPasswordVerify"]),{submit:function(){var t=this,e=this.$route.params.token;this.resetPasswordVerify(e).then(function(e){t.status="OK",t.$router.push("/main")}).catch(function(e){switch(console.log(e),e.status){case 400:t.status="idle",console.warn(e.message);break;case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}})}})},_t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"single"}},[s("div",{staticClass:"single column"},[s("div",{staticClass:"form"},[s("h3",[t._v("Verify your password reset")]),"token-expired"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(0)]):t._e(),"token-invalid"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(1)]):t._e(),"unknown-user"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(2)]):t._e(),"OK"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"success bounce fas fa-check"}),t._m(3)]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The link already expired.")]),e("p",[this._v("Click the link below to request again.")]),e("a",{attrs:{href:"#/reset-password"}},[this._v("Reset password again")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The link is invalid.")]),e("p",[this._v("In case you pasted the link make sure you copied the entire link.\nYou can also reset the password again.")]),e("a",{attrs:{href:"#/reset-password"}},[this._v("Reset password again")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("There is no user attached to this link")]),e("p",[this._v("Perhaps you want to register again?")]),e("a",{attrs:{href:"#/register"}},[this._v("Register an account")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Your registration was successful.")]),e("p",[this._v("You get redirected")])])}]};var bt=s("VU/8")(gt,_t,!1,function(t){s("puoL")},null,null).exports,It={name:"RegisterVerifyResend",mixins:[E],data:function(){return{user:{email:"juergen.riemer@gmail.com"}}},methods:f()({},Object(m.b)(["registerVerifyResend"]),{submit:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.status="sending",setTimeout(function(){t.registerVerifyResend(t.user).then(function(){t.status="OK"}).catch(function(e){switch(e.status){case 400:t.status="idle",t.showError(e);break;case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}})},500);case 2:case"end":return e.stop()}},e,t)}))()}})},kt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"single"}},[s("div",{staticClass:"single column"},[s("div",{staticClass:"form"},[s("h3",[t._v("Reset your password")]),t.active?s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("w-input",{staticClass:"mb4",attrs:{id:"email",label:"E-MAIL",name:"email",inputmode:"email",disabled:t.sending,validators:[t.valid.email],required:"required"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),s("w-button",{staticClass:"ma1",attrs:{"bg-color":"primary",color:"white",lg:"lg",disabled:t.sending,loading:t.sending,type:"submit"}},[t._v("RESEND VERIFICATION")])],1):t._e(),"no-account"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(0)]):t._e(),"OK"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"success bounce fas fa-check"}),t._m(1)]):t._e()],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account does not exist.")]),e("p",[this._v("To create a new account click on the link below.")]),e("a",{attrs:{href:"#/register"}},[this._v("Register an account")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Resending the verification e-mail was successful.")]),e("p",[this._v("Please check your mailbox.")])])}]},xt=s("VU/8")(It,kt,!1,null,null,null).exports,Ct={name:"ApproveInvitesSingle",components:{ApproveInvites:H}},yt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"single"}},[e("div",{staticClass:"single column"},[e("div",{staticClass:"form"},[e("h3",[this._v("Approve invitations")]),e("approve-invites")],1)])])},staticRenderFns:[]};var Lt=s("VU/8")(Ct,yt,!1,function(t){s("/k7H")},null,null).exports,Et={name:"RegisterVerify",mixins:[E],created:function(){this.submit()},methods:f()({},Object(m.b)(["registerVerify"]),{submit:function(){var t=this,e=this.$route.params.token;this.registerVerify(e).then(function(e){t.status="OK",console.log(e),e.data.lists?(t.invites=e.data.lists,t.$router.push("/approve-invites")):t.$router.push("/main")}).catch(function(e){switch(console.log(e),e.status){case 400:t.status="idle",console.warn(e.message);break;case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}})}})},$t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"single"}},[s("div",{staticClass:"single column"},[s("div",{staticClass:"form"},[s("h3",[t._v("Verify your registration")]),"token-expired"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(0)]):t._e(),"token-invalid"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(1)]):t._e(),"unknown-user"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(2)]):t._e(),"user-already-verified"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(3)]):t._e(),"OK"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"success bounce fas fa-check"}),t._m(4)]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The link already expired.")]),e("p",[this._v("Click the link below to send it again.")]),e("a",{attrs:{href:"#/resend-verification"}},[this._v("Resend registration verification")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The link is invalid.")]),e("p",[this._v("In case you pasted the link make sure you copied the entire link.\nWe can also send another verification e-mail to you.")]),e("a",{attrs:{href:"#/resend-verification"}},[this._v("Resend registration verification")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("There is no user attached to this link")]),e("p",[this._v("Perhaps you want to register again?")]),e("a",{attrs:{href:"#/register"}},[this._v("Register an account")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account is already verified.")]),e("p",[this._v("In case you have troubles loggin in, consider to reset your password.")]),e("a",{attrs:{href:"#/reset-password"}},[this._v("Reset your password")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Your registration was successful.")]),e("p",[this._v("You get redirected")])])}]};var St=s("VU/8")(Et,$t,!1,function(t){s("TvPv")},null,null).exports,At={name:"ShareVerify",data:function(){return{status:"verifying..."}},created:function(){this.verify()},methods:f()({},Object(m.b)(["verifyInvitation"]),{verify:function(){var t=this;return l()(u.a.mark(function e(){var s,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.$route.params.token,e.next=3,t.verifyInvitation(s);case 3:(i=e.sent)&&i.data&&i.data.listId?t.$root.$router.push({path:"/main/"+i.data.listId}):t.status=i;case 5:case"end":return e.stop()}},e,t)}))()}})},Rt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("Accept invitation")]),t._v(" "),"expired"==t.status?s("p",[t._v("\n  The link expired."),s("br"),t._v(" \n  Please try to register again.\n  ")]):t._e(),t._v(" "),"invalid"==t.status?s("p",[t._v("\n  The link is not valid."),s("br"),t._v(" \n  Please check if the link was properly pasted.\n  ")]):t._e()])},staticRenderFns:[]},Tt=s("VU/8")(At,Rt,!1,null,null,null).exports,Ot={name:"Login",mixins:[E],data:function(){return{user:{email:"juergen.riemer@gmail.com",password:"Test!234"}}},methods:f()({},Object(m.b)(["login"]),{submit:function(){var t=this;return l()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.status="sending",t.login(t.user).then(function(){t.status="OK",setTimeout(function(){t.$root.$router.push({path:"/main"})},500)}).catch(function(e){switch(e.status){case 422:t.status=e.message;break;default:t.status="idle",t.showError(e)}});case 2:case"end":return e.stop()}},e,t)}))()}})},Nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"single"}},[s("div",{staticClass:"single column"},[s("div",{staticClass:"form"},[s("h3",[t._v("Login")]),t.active?s("w-form",{attrs:{novalidate:"novalidate"},on:{validate:t.validate}},[s("w-input",{staticClass:"mb4",attrs:{id:"email",label:"E-MAIL",name:"email",inputmode:"email",disabled:t.sending,validators:[t.valid.email],required:"required"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),s("w-input",{staticClass:"mb4",attrs:{id:"password",label:"PASSWORD",name:"password",disabled:t.sending,validators:[t.valid.password],required:"required"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),s("div",{staticClass:"buttons"},[s("w-button",{staticClass:"ma1",attrs:{"bg-color":"primary",color:"white",shadow:"shadow",md:"md",disabled:t.sending,loading:t.sending,type:"submit"}},[t._v("LOGIN")])],1)],1):t._e(),"wrong-creds"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),s("div",[s("p",[t._v("Wrong e-mail or password.")]),s("p",[t._v("Please try again or if you are having troubles logging consider to reset your password.")]),s("a",{attrs:{href:"#/login"},on:{click:function(e){t.status="idle"}}},[t._v("Try again")]),s("p"),s("a",{attrs:{href:"#/reset-password"}},[t._v("Reset your password")])])]):t._e(),"in-registration"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),t._m(0)]):t._e(),"login-locked"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"error bounce fas fa-exclamation-triangle"}),s("div",[s("p",[t._v("You exeeded the maximum amount of tries.")]),s("p",[t._v("Please wait a minute and try again or request a new password.")]),s("a",{attrs:{href:"#/login"},on:{click:function(e){t.status="idle"}}},[t._v("Try again")]),s("p"),s("a",{attrs:{href:"#/reset-password"}},[t._v("Request a new password")])])]):t._e(),"OK"==t.status?s("div",{staticClass:"w-flex result"},[s("i",{staticClass:"success bounce fas fa-check"}),t._m(1)]):t._e()],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("The account exists already but was not yet verified.")]),e("p",[this._v("In case you did not receive an e-mail we can send it again.")]),e("a",{attrs:{href:"#/resend-verification"}},[this._v("Resend registration verification")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v("Login successful")]),e("p",[this._v("Redirect....")])])}]},jt=s("VU/8")(Ot,Nt,!1,null,null,null).exports;i.default.use(a.a);var Vt=new a.a({routes:[{path:"/verify-invitation/:token",name:"VerifyInvitation",component:Tt,beforeEnter:function(t,e,s){console.log(localStorage.getItem("userid")),localStorage.getItem("userid")||s("/login"),s()}},{path:"/register-verify/:token",name:"RegisterVerify",component:St},{path:"/register",name:"Register",component:vt},{path:"/login",name:"Login",component:jt},{path:"/resend-verification",name:"RegisterVerifyResend",component:xt},{path:"/approve-invites",name:"ApproveInvitesSingle",component:Lt},{path:"/reset-password",name:"ResetPassword",component:wt},{path:"/reset-password-verify/:token",name:"ResetPasswordVerify",component:bt},{path:"/main",name:"MainIndex",component:dt,beforeEnter:function(t,e,s){localStorage.getItem("userid")||s("/login"),s()}},{path:"/main/:id",name:"MainIndex",component:dt,beforeEnter:function(t,e,s){localStorage.getItem("userid")||s("/login"),s()}},{path:"/",name:"MainIndex",component:dt,beforeEnter:function(t,e,s){localStorage.getItem("userid")||s("/login"),s()}}]}),Ut=s("woOf"),Pt=s.n(Ut),Ft=s("Zrlr"),Dt=s.n(Ft),Mt=s("wxAW"),qt=s.n(Mt),Wt=s("mtWM"),Kt=s.n(Wt),Jt="http://192.168.1.27:3003",Yt=this;window.csrf=null;var Gt,Ht,zt=Kt.a.create({baseURL:Jt,withCredentials:!0,headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("token"),credentials:"include",mode:"cors"}}),Xt=(Gt=l()(u.a.mark(function t(){var e,s,i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=sessionStorage.getItem("csrf"))){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,fetch(Jt+"/csrf",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")},credentials:"include",mode:"cors"});case 7:return s=t.sent,t.next=10,s.json();case 10:return i=t.sent,sessionStorage.setItem("csrf",i.csrf),t.abrupt("return",!0);case 13:case"end":return t.stop()}},t,Yt)})),function(){return Gt.apply(this,arguments)});zt.interceptors.request.use((Ht=l()(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xt();case 2:return t.sent,e.headers["xsrf-token"]=sessionStorage.getItem("csrf"),e.headers.Authorization=localStorage.getItem("token"),t.abrupt("return",e);case 6:case"end":return t.stop()}},t,Yt)})),function(t){return Ht.apply(this,arguments)}),function(t){return g.a.reject(t)}),zt.interceptors.response.use(function(t){return t},function(t){var e=t&&t.response&&t.response.status;401==e&&(self.location.hash="#/login");var s=t&&t.response&&t.response.data&&t.response.data.uid,i=t&&t.response&&t.response.data&&t.response.data.message;return g.a.reject({status:e,message:i,uid:s})});var Zt,Qt=function(){return zt},Bt=function(){function t(e){var s=this;Dt()(this,t),this.list=l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qt().get(s.root+"/");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,s)})),this.root="/"+e,this.name=e}return qt()(t,[{key:"sawList",value:function(){var t=l()(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qt().put(this.root+"/sawList/"+e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"approveInvites",value:function(t){return Qt().post(this.root+"/approveInvitations",t)}},{key:"invite",value:function(t,e,s){return Qt().get(this.root+"/invite/"+t+"/"+e+"/"+s)}},{key:"verifyInvitation",value:function(t){return Qt().get(this.root+"/verifyInvitation/"+t)}},{key:"create",value:function(t){return Qt().post(this.root,t)}},{key:"reset",value:function(t){return Qt().put(this.root+"/reset/"+t)}},{key:"update",value:function(t){var e=t.id||t._id;return Qt().put(this.root+"/"+e,t)}},{key:"delete",value:function(t){return Qt().delete(this.root+"/"+t)}}]),t}(),te=(Zt=l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:fetch("http://192.168.1.27:3003/form",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",mode:"cors"}).then(function(t){return t.json()}).then(function(t){return fetch("http://192.168.1.27:3003/form",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","xsrf-token":t.csrf},credentials:"include",mode:"cors"})}).then(function(t){return console.log(t),t.json()}).then(function(t){console.log(t)});case 1:case"end":return t.stop()}},t,this)})),new Bt("List")),ee=new(function(){function t(){Dt()(this,t),this.root="/item"}return qt()(t,[{key:"list",value:function(t){return Qt().get(this.root+"/"+t)}},{key:"create",value:function(t,e){return Qt().post(this.root+"/"+t,e)}},{key:"update",value:function(t,e,s){return Qt().put(this.root+"/"+t+"/"+e,s)}},{key:"delete",value:function(t,e){return Qt().delete(this.root+"/"+t+"/"+e)}}]),t}())("Item"),se=new(function(){function t(){Dt()(this,t),this.root="/share"}return qt()(t,[{key:"listInvites",value:function(){return Qt().get(this.root+"/listInvites")}},{key:"approveInvites",value:function(t){return Qt().post(this.root+"/approveInvitations",t)}},{key:"invite",value:function(t,e,s){return Qt().get(this.root+"/invite/"+t+"/"+e+"/"+s)}},{key:"verifyInvitation",value:function(t){return Qt().get(this.root+"/verifyInvitation/"+t)}},{key:"toggleAdmin",value:function(t){var e=t.listId,s=t.userId,i=t.isAdmin;return Qt().put(this.root+"/toggleAdmin/"+e+"/"+s+"/"+i)}}]),t}()),ie={state:{lists:[]},getters:{lists:function(t){return t.lists}},actions:{sawList:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:te.sawList(e).then(function(t){return i("sawList",t),t});case 1:case"end":return t.stop()}},t,s)}))()},listInvites:function(t){var e=this;t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",se.listInvites().then(function(t){return t}));case 1:case"end":return t.stop()}},t,e)}))()},approveInvites:function(t,e){var s=this,i=t.commit,n=e.approves,r=e.lists;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",se.approveInvites(n).then(function(t){return i("approveInvites",{lists:r}),t}));case 1:case"end":return t.stop()}},t,s)}))()},inviteList:function(t,e){var s=this,i=(t.commit,e.listId),n=e.email,r=e.role;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",se.invite(i,n,r).then(function(t){return t}));case 1:case"end":return t.stop()}},t,s)}))()},verifyInvitation:function(t,e){var s=this;t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",se.verifyInvitation(e).then(function(t){return t}));case 1:case"end":return t.stop()}},t,s)}))()},toggleAdmin:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.warn(e),t.abrupt("return",se.toggleAdmin(e).then(function(t){return i("toggleAdmin",e),t}));case 2:case"end":return t.stop()}},t,s)}))()},deleteList:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",te.delete(e).then(function(t){return i("removeList",e),t}));case 1:case"end":return t.stop()}},t,s)}))()},updateList:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:te.update(e).then(function(t){return i("updateList",t.data),!0});case 1:case"end":return t.stop()}},t,s)}))()},resetList:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:te.reset(e).then(function(t){return i("resetList",e),!0});case 1:case"end":return t.stop()}},t,s)}))()},addList:function(t,e){var s=this,i=t.commit,n=e.list;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:te.create(n).then(function(t){return i("addList",t.data),t});case 1:case"end":return t.stop()}},t,s)}))()},fetchLists:function(t){var e=this,s=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:te.list().then(function(t){return t&&t.data&&s("setLists",t.data),t});case 1:case"end":return t.stop()}},t,e)}))()},addItem:function(t,e){var s=this,i=t.commit,n=e.listId,r=e.item;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ee.create(n,r).then(function(t){return i("addItem",{listId:n,item:t.data}),t}));case 1:case"end":return t.stop()}},t,s)}))()},updateItem:function(t,e){var s=this,i=t.commit,n=e.listId,r=e.itemId,a=e.item;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ee.update(n,r,a).then(function(t){return i("updateItem",{listId:n,item:t.data}),!0});case 1:case"end":return t.stop()}},t,s)}))()},deleteItem:function(t,e){var s=this,i=t.commit,n=e.listId,r=e.itemId;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ee.delete(n,r).then(function(t){return i("removeItem",{listId:n,itemId:r}),t}));case 1:case"end":return t.stop()}},t,s)}))()},addItemExtern:function(t,e){(0,t.commit)("addItemExtern",e)},updateItemExtern:function(t,e){(0,t.commit)("updateItemExtern",e)},removeItemExtern:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i("removeItemExtern",e);case 1:case"end":return t.stop()}},t,s)}))()}},mutations:{sawList:function(t,e){var s=e.data,i=localStorage.getItem("userid"),n=t.lists.find(function(t){return t._id==s.listId});if(n){var r=n.users.find(function(t){return t.userId==i});r&&(r.lastSeen=s.lastSeen)}},addList:function(t,e){return t.lists.unshift(e)},setLists:function(t,e){return t.lists=e},removeList:function(t,e){t.lists=t.lists.filter(function(t){return t._id!==e})},approveInvites:function(t,e){e.lists;console.log("add lists!!")},updateList:function(t,e){var s=t.lists.findIndex(function(t){return t._id==e._id});-1!==s&&t.lists.splice(s,1,e)},resetList:function(t,e){t.lists.find(function(t){return t._id==e}).items.forEach(function(t){return t.done=!1})},updateItem:function(t,e){var s=e.listId,i=e.item,n=localStorage.getItem("userid");t.lists.find(function(t){return t._id==s}).users.find(function(t){return t.userId==n}).lastSeen=i.updatedAt;var r=t.lists.findIndex(function(t){return t._id==i._id});-1!==r&&t.lists.splice(r,1,i)},addItem:function(t,e){var s=e.listId,i=e.item,n=localStorage.getItem("userid");t.lists.find(function(t){return t._id==s}).users.find(function(t){return t.userId==n}).lastSeen=i.updatedAt;var r=t.lists.findIndex(function(t){return t._id==s});t.lists[r].items.push(i)},removeItem:function(t,e){var s=e.listId,i=e.itemId,n=t.lists.findIndex(function(t){return t._id==s}),r=t.lists[n].items;r.splice(r.findIndex(function(t){return t._id==i}),1)},toggleAdmin:function(t,e){var s=e.listId,i=e.userId,n=e.isAdmin,r=t.lists.findIndex(function(t){return t._id==s});t.lists[r].users.find(function(t){return t.userId==i}).role=n?"admin":"user"},addItemExtern:function(t,e){var s=e.listId,i=e.item;t.lists.find(function(t){return t._id==s}).items.push(i)},updateItemExtern:function(t,e){var s=t.lists.find(function(t){return t._id==e.listId}),n=s.items.findIndex(function(t){return t._id==e.item._id});Pt()(s.items[n],e.item),s.meta||i.default.set(s,"meta",{added:0,updated:0,removed:0}),s.meta.updated++},removeItemExtern:function(t,e){var s=e.listId,i=e.itemId,n=t.lists.find(function(t){return t._id==s});n.items.splice(n.items.findIndex(function(t){return t._id==i}),1)}}},ne=new(function(){function t(){Dt()(this,t),this.root="/users"}return qt()(t,[{key:"registerVerifyResend",value:function(t){return Qt().post(this.root+"/registerVerifyResend",t)}},{key:"registerVerify",value:function(t){return Qt().get(this.root+"/registerVerify/"+t)}},{key:"resetPassword",value:function(t){return Qt().post(this.root+"/resetPassword",t)}},{key:"resetPasswordVerify",value:function(t){return Qt().get(this.root+"/resetPasswordVerify/"+t)}},{key:"info",value:function(){return Qt().get(this.root+"/info")}},{key:"login",value:function(t){return Qt().post(this.root+"/login",t)}},{key:"register",value:function(t){return Qt().post(this.root+"/register",t)}},{key:"logout",value:function(){return Qt().post(this.root+"/logout")}}]),t}())("User"),re={state:{user:[]},getters:{user:function(t){return t.user}},actions:{registerUser:function(t,e){var s=this;t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ne.register(e).then(function(t){return t}));case 1:case"end":return t.stop()}},t,s)}))()},registerVerifyResend:function(t,e){var s=this;t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ne.registerVerifyResend(e).then(function(t){return t}));case 1:case"end":return t.stop()}},t,s)}))()},registerVerify:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ne.registerVerify(e).then(function(t){return i("addUser",t.data.token),i("setToken",t.data.token),t}));case 1:case"end":return t.stop()}},t,s)}))()},resetPassword:function(t,e){var s=this;t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ne.resetPassword(e).then(function(t){return t}));case 1:case"end":return t.stop()}},t,s)}))()},resetPasswordVerify:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ne.resetPasswordVerify(e).then(function(t){return i("addUser",t.data.token),i("setToken",t.data.token),t}));case 1:case"end":return t.stop()}},t,s)}))()},login:function(t,e){var s=this,i=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ne.login(e).then(function(t){return t&&t.data&&(i("addUser",t.data.userdata),i("setToken",t.data.token)),t}));case 1:case"end":return t.stop()}},t,s)}))()},info:function(t){var e=this,s=t.commit;return l()(u.a.mark(function t(){var i;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=localStorage.getItem("userid"),t.abrupt("return",ne.info(i).then(function(t){return t&&t.data&&s("addUser",t.data.userdata),t}));case 2:case"end":return t.stop()}},t,e)}))()},logout:function(t){var e=this,s=t.commit;return l()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("token"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("userid"),s("removeUser"),self.location.hash="#/login";case 6:case"end":return t.stop()}},t,e)}))()}},mutations:{addUser:function(t,e){t.user=e,localStorage.setItem("firstName",e.firstName),localStorage.setItem("lastName",e.lastName),localStorage.setItem("userid",e._id)},setToken:function(t,e){console.log(e),localStorage.setItem("token",e),Qt().defaults.headers.common.Authorization=e,console.log(localStorage.getItem("token"))},removeUser:function(t){return t.user=null},updateUser:function(t,e){console.warn(e);var s=t.todos.findIndex(function(t){return console.log(t),t._id==e._id});-1!==s&&t.todos.splice(s,1,e)}}};i.default.use(m.a);var ae=new m.a.Store({modules:{list:ie,user:re}}),oe=s("HI0L"),ue=s.n(oe),ce=s("ZlvF"),le=s.n(ce);s("1LJm");s.d(e,"bus",function(){return de}),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(document.body.className="is-safari"),i.default.config.productionTip=!1;var de=new i.default;i.default.use(new ue.a({debug:!1,connection:Jt})),i.default.mixin({computed:{listAdmin:function(){return this.list?"user"!=this.list.users.find(function(t){return t.userId==localStorage.getItem("userid")}).role:null}},methods:{showError:function(t){var e=t.status,s=t.message,i=t.uid;console.log(e,s,i),401!==e&&alert("An error happened, corrid:\n\n"+i)},avatarColor:function(t){t||(t="XXX");for(var e=0,s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e);return"hsl("+e%360+", 30%, 80%)"}}}),i.default.use(le.a);var fe=new le.a({});new i.default({el:"#app",waveui:fe,router:Vt,store:ae,components:{App:r},template:"<App/>"})},TvPv:function(t,e){},YJJv:function(t,e){},aXBs:function(t,e){},atKR:function(t,e){},dniW:function(t,e){},eRWW:function(t,e){},iDPJ:function(t,e){},lmG3:function(t,e){},"m+18":function(t,e){},pILz:function(t,e){},puoL:function(t,e){},qWKt:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ead59c11ba29bc3b462e.js.map